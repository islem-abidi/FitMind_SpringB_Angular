<div class="container my-5">
    <h2 class="text-primary mb-4 fw-bold">🔄 Renouveler un abonnement</h2>
  
    <form (ngSubmit)="renouveler()" #renouvForm="ngForm" novalidate>
      <!-- ID utilisateur -->
<div class="mb-3">
    <label class="form-label">ID de l'utilisateur</label>
    <!--<input type="number" [(ngModel)]="idUser" name="idUser" class="form-control" required>-->
    <!--<input type="number" [(ngModel)]="idUser" (change)="loadPointsFidelite()" name="idUser" class="form-control" required>-->
    <input type="number" [(ngModel)]="idUser" (ngModelChange)="loadPointsFidelite()" name="idUser" class="form-control" required>

  </div>
  
  
      <!-- Type -->
      <div class="mb-3">
        <label class="form-label">Type d’abonnement</label>
        <select [(ngModel)]="typeAbonnement" (change)="calculateMontant()" name="typeAbonnement" class="form-select" required>
          <option *ngFor="let type of typeOptions" [value]="type">{{ type }}</option>
        </select>
      </div>
  
      <!-- Durée -->
      <div class="mb-3">
        <label class="form-label">Durée</label>
        <select [(ngModel)]="dureeAbonnement" (change)="calculateMontant()" name="dureeAbonnement" class="form-select" required>
          <option *ngFor="let duree of dureeOptions" [value]="duree">{{ duree }}</option>
        </select>
      </div>
  
      <!-- Montant -->
      <div class="mb-3">
        <label class="form-label">Montant calculé</label>
        <input type="number" [(ngModel)]="montant" name="montant" class="form-control" readonly>
      </div>
      <!-- Montant initial -->
<div class="mb-3">
  <label class="form-label">💰 Montant initial</label>
  <input type="number" class="form-control" [value]="montantInitial" readonly>
</div>

<!-- Réduction appliquée -->
<div class="mb-3" *ngIf="pointsFidelite >= 5">
  <label class="form-label">🎁 Réduction ({{ pointsFidelite }}%)</label>
  <input type="number" class="form-control" [value]="montantInitial - montantReduit" readonly>
</div>

<!-- Montant final -->
<div class="mb-3">
  <label class="form-label">✅ Montant à payer</label>
  <input type="number" class="form-control" [value]="montantReduit" readonly>
</div>

         <!-- Points fidélité -->
<div class="mb-3">
  <label class="form-label">Points de fidélité</label>
  <input type="number" class="form-control" [value]="pointsFidelite" readonly>
</div>

      <!-- Stripe -->
      <div class="mb-3">
        <label class="form-label">💳 Carte bancaire</label>
        <div id="card-element" class="form-control p-3"></div>
      </div>
  
      <button class="btn btn-success" type="submit">Renouveler</button>
    </form>
  </div>
  